#Media Api

Routes:
----
* [/media/get/:file](#media-get)
* [/media/save/:file](#media-save)
* [/media/upload](#media-upload)
* [/media/list](#media-list)

params
---
* w || width |Number| (Width in pixels)
* h || height |Number| (Height in pixels)
* x |Number| (x in pixels)
* y |Number| (y in pixels)
* crop |Boolean| (true requires w-h-x-y)
* strech |Boolean| (true requires w-h)
* q || quality |Number| (range 0-100)
* g || gravity |String| (used in crop North - NorthEast - NorthWest - East - West - South - SouthEast - SouthWest)
  
media-get
---
* route |GET| (/media/get/:file)
* file (ex: HIs83x9oS.jpg)
* query: [params](#params) (ex: ?w=100&h=100&strech=true)


media-save
---
* route |GET| (/media/save/:file) 
* file (ex: HIs83x9oS.jpg)
* query: [params](#params) (ex: ?w=100&h=100&strech=true)

Will create a variant, and save to media object making the modified path for recieving it with /media/get/:file.

media-upload
---
* route (/media/get/:file)
* file (ex: HIs83x9oS.jpg)
* post:
  * [params](#params) (ex: {w:100,h:100,strech:true})
  * file Field
    * mutlipart upload
    * base64 image |String|
  * name Field (if base64 the file needs a name with extendsion)
  
sample-upload
===

request
---
```json
{
  file: [upload],
  name:"pelle.jpg",
  w:100,
  h:100,
  c:true,
  x:100,
  y:100
}
```

responds
---
```JSON
{
    "media": {
        "__v": 0,
        "_id": "53d94d0a2871fd4033000006",
        "base": "1-zJ6tft4w.jpg",
        "body": {
            "data": [
                {
                    "content": {
                        "path": "1-zJ6tft4w.jpg",
                        "Pixels Per Second": "70.3M",
                        "Elapsed Time": "0:01",
                        "User Time": "0.040u",
                        "Tainted": "False",
                        "Profile-EXIF": {
                            "GPS Info": "1686",
                            "Sharpness": "2",
                            "Saturation": "0",
                            "Contrast": "0",
                            "Gain Control": "0",
                            "Scene Capture Type": "0",
                            "Focal Length In35mm Film": "0",
                            "Digital Zoom Ratio": "0/0",
                            "White Balance": "0",
                            "Exposure Mode": "0",
                            "Custom Rendered": "0",
                            "Interoperability Offset": "1656",
                            "Exif Image Length": "2560",
                            "Exif Image Width": "1440",
                            "Color Space": "1",
                            "Flash Pix Version": "0100",
                            "Sub Sec Time Original": "353",
                            "Maker Note": "\\002WB\\001\\207\\267\\241?\\000\\000\\200?\\260\\217\\245?j\\260\\241?\\000\\000\\200?\\377\\265\\245?B\\027\\000\\000\\001\\000\\000\\000\\011\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\020\\000\\000\\000\\325\\000\\000\\000\\245\\006\\000\\000\\253\\000\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000O\\002\\000\\000U\\004\\000\\000\\375S\\223?\\000\\000\\000\\000\\3719Q?\\371\\037S?\\371\\307\\016?\\000\\000\\000\\000\\371I\\005?\\371SO?\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\002\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\371\\011B?\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\362/\\377>\\000\\000\\000\\000\\012\\000\\000\\000\\371\\005U?\\371'-?\\000\\000V?\\000\\300-?\\000\\000\\200?\\000\\000\\200?\\000\\000\\200?\\000\\000\\200?\\000\\000\\200?\\000\\000\\200?AEC\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\001\\010\\000\\000e\\010\\227\\003\\002\\000\\000\\000\\000%\\000\\000,\\001\\000\\000?\\000\\000\\000\\216\\003\\000\\000\\033\\002\\000\\000\\344\\001\\000\\000\\344\\001\\000\\0005\\000\\000\\000-\\000\\000\\000\\325\\000\\000\\000\\340\\001\\000\\000\\000\\000\\223?\\254\\336\\C\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\0005\\000\\000\\000>\\000\\000\\000\\325\\000\\000\\000\\340\\001\\000\\000\\000\\000\\223?\\342\\022\\C5\\000\\000\\000=\\000\\000\\000\\325\\000\\000\\000\\340\\001\\000\\000\\000\\000\\223?\\342\\022^C5\\000\\000\\000=\\000\\000\\000\\327\\000\\000\\000\\340\\001\\000\\000\\000\\000\\234?\\254\\336^C\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\0005\\000\\000\\000=\\000\\000\\000\\327\\000\\000\\000\\340\\001\\000\\000\\000\\000\\234?\\342\\022^C5\\000\\000\\0008\\000\\000\\000\\325\\000\\000\\000\\340\\001\\000\\000\\000\\000\\223?%\\211ZC\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\024\\000\\217<\\000\\000\\000\\0001\\007\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000",
                            "Focal Length": "1830/1000",
                            "Flash": "32",
                            "Light Source": "0",
                            "Metering Mode": "255",
                            "Max Aperture Value": "200/100",
                            "Exposure Bias Value": "0/6",
                            "Brightness Value": "3685800/1000000",
                            "Aperture Value": "200/100",
                            "Shutter Speed Value": "7007/1000",
                            "Compressed Bits Per Pixel": "4000/1000",
                            "Components Configuration": "\\001\\002\\003\\000",
                            "Date Time Digitized": "2014:07:09 10:30:58",
                            "Date Time Original": "2014:07:09 10:30:58",
                            "Exif Version": "0220",
                            "ISO Speed Ratings": "125",
                            "Exposure Program": "2",
                            "F Number": "2000000/1000000",
                            "Exposure Time": "1/129",
                            "Exif Offset": "170",
                            "Y Cb Cr Positioning": "1",
                            "Date Time": "2014:07:09 10:30:58",
                            "Resolution Unit": "2",
                            "Y Resolution": "72/1",
                            "X Resolution": "72/1",
                            "Orientation": "1",
                            "Model": "831C",
                            "Make": "HTC"
                        },
                        "Signature": "04e2892b67cac68d3dd0e40461de41d9126c921ea2c33e07cf8742cd495f0886",
                        "JPEG-Sampling-factors": "2x2,1x1,1x1",
                        "JPEG-Colorspace-Name": "RGB",
                        "JPEG-Colorspace": "2",
                        "JPEG-Quality": "95",
                        "Compression": "JPEG",
                        "Iterations": "0",
                        "Dispose": "Undefined",
                        "Compose": "Over",
                        "Matte Color": "#BDBDBD",
                        "Border Color": "#DFDFDF",
                        "Background Color": "white",
                        "Orientation": "TopLeft",
                        "Interlace": "No",
                        "Filesize": "1.3M",
                        "Channel Statistics": {
                            "Blue": {
                                "Standard Deviation": "71.25 (0.2794)",
                                "Mean": "75.36 (0.2955)",
                                "Maximum": "255.00 (1.0000)",
                                "Minimum": "0.00 (0.0000)"
                            },
                            "Green": {
                                "Standard Deviation": "77.35 (0.3033)",
                                "Mean": "102.54 (0.4021)",
                                "Maximum": "255.00 (1.0000)",
                                "Minimum": "0.00 (0.0000)"
                            },
                            "Red": {
                                "Standard Deviation": "80.04 (0.3139)",
                                "Mean": "109.97 (0.4313)",
                                "Maximum": "255.00 (1.0000)",
                                "Minimum": "0.00 (0.0000)"
                            }
                        },
                        "Channel Depths": {
                            "Blue": "8 bits",
                            "Green": "8 bits",
                            "Red": "8 bits"
                        },
                        "depth": 8,
                        "Depth": "8 bits-per-pixel component",
                        "Type": "true color",
                        "Class": "DirectClass",
                        "size": {
                            "height": 2560,
                            "width": 1440
                        },
                        "Geometry": "1440x2560",
                        "format": "JPEG",
                        "Format": "JPEG (Joint Photographic Experts Group JFIF format)"
                    },
                    "source": "gm"
                }
            ]
        },
        "date": "2014-07-30T19:52:42.914Z",
        "ext": ".jpg",
        "filename": "2014-07-09 10.30.58.jpg",
        "filesize": 1362195,
        "group": "",
        "height": 0,
        "mime": "image/jpeg",
        "path": "1-zJ6tft4w",
        "permission": [
            {
                "id": "53c580e88a24cd785300000d",
                "role": "5384cb326f70065e7d000001"
            }
        ],
        "role": "53901c2d13be82ba7b000002",
        "states": {
            "lastUpdated": "2014-07-30T19:52:43.401Z"
        },
        "tags": [],
        "title": "2014-07-09 10.30.58.jpg",
        "url": "miner_media/uploads/1-zJ6tft4w.jpg",
        "variant": [
            {
                "url": "1-zJ6tft4w.56x100-100x100.jpg",
                "params": {
                    "y": 100,
                    "x": 100,
                    "crop": false,
                    "height": 100,
                    "width": 100
                },
                "extra": {
                    "params": {
                        "y": 100,
                        "x": 100,
                        "crop": false,
                        "height": 100,
                        "width": 100
                    },
                    "height": 100,
                    "width": 56
                }
            }
        ],
        "width": 0
    },
    "add": {
        "id": "53d94d0a2871fd4033000006",
        "group": "",
        "base": "1-zJ6tft4w.56x100-100x100.jpg",
        "extra": {
            "width": 56,
            "height": 100,
            "params": {
                "width": 100,
                "height": 100,
                "crop": false,
                "x": 100,
                "y": 100
            }
        }
    },
    "base": "1-zJ6tft4w.56x100-100x100.jpg"
}
```
